<!doctype html>
<head>
    <meta charset="utf-8">
    <title>oldweb.today</title>
    
    <script src="/static/jquery-2.1.4.min.js"></script>
    
    <!-- Skeleton -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/static/normalize.css">
    <link rel="stylesheet" href="/static/skeleton.css">
    
    <!-- Viz -->
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="/static/timemap.js"></script>

    <!-- Main Netcapsule script -->
    <link rel="stylesheet" href="/static/main.css">
    <script>
        var coll = undefined;
        var url = undefined;
        var curr_ts = undefined;
        
        $(function() {
            $("#urlinput").blur(function() {
                url = $("#urlinput").val();
            });
            
            $("#mainform").submit(function(e) {
                e.preventDefault();
                
                if (!coll || !curr_ts || !url) {
                    $("#invalid-form").show();
                    return;
                }
                
                var full_url = window.location.origin + "/" + coll + "/" + curr_ts + "/" + url;
                window.location.href = full_url;
            });
            
            function reset_error() {
                if (coll && curr_ts && url) {
                    $("#invalid-form").hide();
                }
            }
            
            $("#urlinput").blur(reset_error);
            $("#browser-input").change(reset_error);
            
            url = $("#urlinput").val();
        });
    </script>
    <script src="/static/shared.js"></script>
</head>
<body id="frontpage">
    <main class="container">
        <h1 class="logo"><span class="colors">oldweb</span>.today</h1>

        <form id="mainform">
            <div class="row">
                <div class="two columns">
                    <label for="browser-dropdown">browser</label>
                </div>
                <div class="nine columns">
                    <div id="browser-dropdown" class="dropdown">
                        <span id="browser-icon-group">
                            <img id="browser-icon" src=""/>
                            <label id="browser-label"></label>
                        </span>
                        <span id="browser-text">Choose Browser...</span>
                        <span id="browser-arrow" class="arrow-down"></span>
                    </div>
                    <div class="about-browser"><a id="about-link" href="#" target="_blank">about this browser</a></div>
                </div>
            </div>

            <div class="row">
                <div class="two columns">
                    <label for="urlinput">address</label>
                </div>
                <div class="seven columns">
                    <input type="url" name="url" class="u-full-width" id="urlinput" value="" placeholder="http://">
                </div>
            </div>
            
            <div class="row">
                <div class="two columns">
                    <label>date</label>
                </div>
                <div class="nine columns">
                    <div id="datetime-dropdown" class="dropdown">
                        <input id="datetime" class="drop-skip"/>
                        <span id="browser-arrow" class="arrow-down"></span>
                        <div class="rel_message">Datetime changed, please click "reload" or "refresh" in the browser</div>
                    </div>  
                </div>
            </div>
            <div id="invalid-form">Please select a browser, url and a date.</div>
            <button type="submit" class="button-primary">Surf The Web!</button>
        </form>

        <div class="row">
            <div class="eight columns">
                <p style="display: none">
                    Session time limit: <strong id="session-limit">10 minutes</strong>.<br>
                    Active users: <strong id="number-users">56</strong> of <strong id="max-users">100</strong>.
                </p>
                <p class="section">A project by <a href="https://github.com/ikreymer">Ilya Kreymer</a>, design by <a href="#">Dragan Espenschied</a>, with support from</p>
                <div>
                    <a class="support shuttleworth" href="https://www.shuttleworthfoundation.org/"><img src="/static/shuttleworth-tiny.png" alt="Shuttleworth Foundation"></a>
                    <a class="support rhizome" href="http://rhizome.org/"><img src="/static/rhizome-tiny.png" alt="Rhizome"></a>
                </div>
                <p class="link-github"><a href="https://github.com/ikreymer/netcapsule">Source code available on Github.</a></p>
                
            </div>
        </div>

    </main>

    {% include 'browser-select.html' %}
</body>